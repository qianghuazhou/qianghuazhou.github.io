<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Cancer Synoptic Case Summary — Generator</title>
  <style>
    :root{
      --bg:#0b0f19; --card:#121a2a; --ink:#e8eefc; --muted:#a9b7d6; --line:#24314b;
      --accent:#7aa2ff; --accent2:#6ee7b7; --warn:#fbbf24;
    }
    *{box-sizing:border-box}
    body{
      margin:0; padding:24px;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: radial-gradient(1200px 800px at 20% 0%, #121a2a 0%, var(--bg) 55%);
      color:var(--ink);
    }
    h1{margin:0 0 6px; font-size:20px; letter-spacing:.2px}
    .sub{margin:0 0 18px; color:var(--muted); font-size:13px}
    .grid{
      display:grid; gap:14px;
      grid-template-columns: 1fr 1fr;
      align-items:start;
    }
    @media (max-width: 980px){ .grid{grid-template-columns: 1fr;} }
    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
      border:1px solid var(--line);
      border-radius:14px;
      padding:14px;
      box-shadow: 0 8px 18px rgba(0,0,0,.25);
    }
    .card h2{
      margin:0 0 10px;
      font-size:14px;
      color:var(--ink);
      display:flex; gap:8px; align-items:center;
    }
    .pill{
      font-size:11px; padding:2px 8px; border-radius:999px;
      border:1px solid var(--line); color:var(--muted);
    }
    fieldset{border:0; margin:0; padding:0}
    .row{display:flex; gap:10px; flex-wrap:wrap}
    .col{flex:1 1 260px}
    label{
      display:flex; gap:8px; align-items:flex-start;
      padding:8px 10px;
      border:1px solid var(--line);
      border-radius:10px;
      background: rgba(0,0,0,.12);
      cursor:pointer;
      user-select:none;
    }
    label:hover{border-color:rgba(122,162,255,.6)}
    input[type="checkbox"], input[type="radio"]{margin-top:2px}
    .lbltxt{line-height:1.2}
    .muted{color:var(--muted); font-size:12px}
    .mini{font-size:12px; color:var(--muted)}
    input[type="text"], textarea, select{
      width:100%;
      padding:10px 10px;
      border-radius:10px;
      border:1px solid var(--line);
      background: rgba(0,0,0,.18);
      color:var(--ink);
      outline:none;
    }
    input[type="text"]:focus, textarea:focus, select:focus{border-color:rgba(122,162,255,.9)}
    textarea{min-height:240px; resize:vertical; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;}
    .btnbar{display:flex; gap:10px; flex-wrap:wrap}
    button{
      padding:10px 12px;
      border-radius:12px;
      border:1px solid var(--line);
      background: rgba(122,162,255,.15);
      color:var(--ink);
      cursor:pointer;
      font-weight:600;
    }
    button:hover{border-color:rgba(122,162,255,.9)}
    button.secondary{background:rgba(110,231,183,.12)}
    button.danger{background:rgba(251,191,36,.12)}
    details{border:1px solid var(--line); border-radius:12px; padding:10px; background:rgba(0,0,0,.10)}
    summary{cursor:pointer; font-weight:700; color:var(--ink)}
    .hist-search{margin:10px 0 10px}
    .hist-list{display:grid; gap:8px; grid-template-columns: 1fr 1fr;}
    @media (max-width: 740px){ .hist-list{grid-template-columns:1fr;} }
    .hint{color:var(--muted); font-size:12px; margin-top:6px}
    .req{color:var(--warn); font-weight:700}
    .rightcol .card{position:sticky; top:16px}
    .smallcap{font-size:11px; letter-spacing:.08em; text-transform:uppercase; color:var(--muted)}
    .divider{height:1px; background:var(--line); margin:10px 0}
  </style>
</head>
<body>
  <h1>Cancer Synoptic Case Summary — HTML Generator</h1>
  <p class="sub">Select elements → click <b>Generate</b> to produce a synoptic block you can paste into your report.</p>

  <div class="grid">
    <div class="leftcol">

      <div class="card">
        <h2>Specimen <span class="pill">multiple</span></h2>
        <fieldset class="row">
          <div class="col">
            <label><input type="checkbox" name="specimen" value="Peripheral blood smear"><span class="lbltxt">Peripheral blood smear</span></label>
            <label><input type="checkbox" name="specimen" value="Bone marrow aspiration"><span class="lbltxt">Bone marrow aspiration</span></label>
            <label><input type="checkbox" name="specimen" value="Bone marrow aspirate clot (cell block)"><span class="lbltxt">Bone marrow aspirate clot (cell block)</span></label>
          </div>
          <div class="col">
            <label><input type="checkbox" name="specimen" value="Bone marrow core (trephine) biopsy"><span class="lbltxt">Bone marrow core (trephine) biopsy</span></label>
            <label><input type="checkbox" name="specimen" value="Bone marrow core touch preparation (imprint)"><span class="lbltxt">Bone marrow core touch preparation (imprint)</span></label>
          </div>
        </fieldset>
      </div>

      <div class="card">
        <h2>Procedure <span class="pill">multiple</span></h2>
        <fieldset class="row">
          <div class="col">
            <label><input type="checkbox" name="procedure" value="Aspiration"><span class="lbltxt">Aspiration</span></label>
          </div>
          <div class="col">
            <label><input type="checkbox" name="procedure" value="Biopsy"><span class="lbltxt">Biopsy</span></label>
          </div>
        </fieldset>

        <div class="divider"></div>

        <div class="row">
          <div class="col">
            <div class="smallcap">Aspiration site</div>
            <label style="margin-top:8px">
              <input type="checkbox" name="aspSite" value="Posterior iliac crest">
              <span class="lbltxt">Posterior iliac crest</span>
            </label>
          </div>
          <div class="col">
            <div class="smallcap">Biopsy site</div>
            <label style="margin-top:8px">
              <input type="checkbox" name="bxSite" value="Posterior iliac crest">
              <span class="lbltxt">Posterior iliac crest</span>
            </label>
          </div>
        </div>

        <p class="hint">Tip: If you want later, you can add more site options in the HTML (copy the checkbox line and change the value).</p>
      </div>

      <div class="card">
        <h2>Histologic type <span class="pill"><span class="req">*</span> choose one</span></h2>

        <div class="hist-search">
          <input id="histFilter" type="text" placeholder="Filter (e.g., AML, myelofibrosis, CMML, DLBCL, PTLD)..." />
          <div class="hint">Filtering only hides options visually; it doesn’t change selections.</div>
        </div>

        <details open>
          <summary>Myeloproliferative Neoplasms</summary>
          <div class="hist-list" data-group="mpn">
            <label class="hist"><input type="radio" name="histType" value="Chronic myelogenous leukemia, BCR-ABL1 positive"><span class="lbltxt">Chronic myelogenous leukemia, BCR-ABL1 positive</span></label>
            <label class="hist"><input type="radio" name="histType" value="Chronic neutrophilic leukemia"><span class="lbltxt">Chronic neutrophilic leukemia</span></label>
            <label class="hist"><input type="radio" name="histType" value="Polycythemia vera"><span class="lbltxt">Polycythemia vera</span></label>
            <label class="hist"><input type="radio" name="histType" value="Primary myelofibrosis"><span class="lbltxt">Primary myelofibrosis</span></label>
            <label class="hist"><input type="radio" name="histType" value="Essential thrombocythemia"><span class="lbltxt">Essential thrombocythemia</span></label>
            <label class="hist"><input type="radio" name="histType" value="Chronic eosinophilic leukemia, NOS"><span class="lbltxt">Chronic eosinophilic leukemia, NOS</span></label>

            <label class="hist">
              <input type="radio" name="histType" value="Mastocytosis">
              <span class="lbltxt">Mastocytosis (specify type):</span>
            </label>
            <div class="col">
              <input type="text" id="mastType" placeholder="e.g., systemic mastocytosis..." />
              <div class="mini">Only used if “Mastocytosis” is selected.</div>
            </div>

            <label class="hist"><input type="radio" name="histType" value="Myeloproliferative neoplasm, unclassifiable"><span class="lbltxt">Myeloproliferative neoplasm, unclassifiable</span></label>
          </div>
        </details>

        <details>
          <summary>Myeloid/Lymphoid Neoplasms With Eosinophilia (PDGFRA/PDGFRB/FGFR1)</summary>
          <div class="hist-list" data-group="eos">
            <label class="hist"><input type="radio" name="histType" value="Myeloid or lymphoid neoplasm with PDGFRA rearrangement"><span class="lbltxt">Myeloid or lymphoid neoplasm with PDGFRA rearrangement</span></label>
            <label class="hist"><input type="radio" name="histType" value="Myeloid neoplasm with PDGFRB rearrangement"><span class="lbltxt">Myeloid neoplasm with PDGFRB rearrangement</span></label>
            <label class="hist"><input type="radio" name="histType" value="Myeloid or lymphoid neoplasm with FGFR1 abnormalities"><span class="lbltxt">Myeloid or lymphoid neoplasm with FGFR1 abnormalities</span></label>
          </div>
        </details>

        <details>
          <summary>Myelodysplastic/Myeloproliferative Neoplasms</summary>
          <div class="hist-list" data-group="mdsmpn">
            <label class="hist"><input type="radio" name="histType" value="Chronic myelomonocytic leukemia"><span class="lbltxt">Chronic myelomonocytic leukemia</span></label>
            <label class="hist"><input type="radio" name="histType" value="Atypical chronic myeloid leukemia, BCR-ABL1 negative"><span class="lbltxt">Atypical chronic myeloid leukemia, BCR-ABL1 negative</span></label>
            <label class="hist"><input type="radio" name="histType" value="Juvenile myelomonocytic leukemia"><span class="lbltxt">Juvenile myelomonocytic leukemia</span></label>
            <label class="hist"><input type="radio" name="histType" value="Myelodysplastic/myeloproliferative neoplasm, unclassifiable"><span class="lbltxt">Myelodysplastic/myeloproliferative neoplasm, unclassifiable</span></label>
            <label class="hist"><input type="radio" name="histType" value="Refractory anemia with ring sideroblasts associated with marked thrombocytosis"><span class="lbltxt">Refractory anemia with ring sideroblasts associated with marked thrombocytosis</span></label>
          </div>
        </details>

        <details>
          <summary>Myelodysplastic Syndromes</summary>
          <div class="hist-list" data-group="mds">
            <label class="hist"><input type="radio" name="histType" value="Refractory anemia"><span class="lbltxt">Refractory anemia</span></label>
            <label class="hist"><input type="radio" name="histType" value="Refractory neutropenia"><span class="lbltxt">Refractory neutropenia</span></label>
            <label class="hist"><input type="radio" name="histType" value="Refractory thrombocytopenia"><span class="lbltxt">Refractory thrombocytopenia</span></label>
            <label class="hist"><input type="radio" name="histType" value="Refractory anemia with ring sideroblasts"><span class="lbltxt">Refractory anemia with ring sideroblasts</span></label>
            <label class="hist"><input type="radio" name="histType" value="Refractory cytopenia with multilineage dysplasia"><span class="lbltxt">Refractory cytopenia with multilineage dysplasia</span></label>
            <label class="hist"><input type="radio" name="histType" value="Refractory anemia with excess blasts"><span class="lbltxt">Refractory anemia with excess blasts</span></label>
            <label class="hist"><input type="radio" name="histType" value="Myelodysplastic syndrome associated with isolated del(5q)"><span class="lbltxt">Myelodysplastic syndrome associated with isolated del(5q)</span></label>
            <label class="hist"><input type="radio" name="histType" value="Myelodysplastic syndrome, unclassifiable"><span class="lbltxt">Myelodysplastic syndrome, unclassifiable</span></label>
            <label class="hist"><input type="radio" name="histType" value="Refractory cytopenia of childhood"><span class="lbltxt">Refractory cytopenia of childhood</span></label>
          </div>
        </details>

        <details>
          <summary>AML With Recurrent Genetic Abnormalities</summary>
          <div class="hist-list" data-group="amlrga">
            <label class="hist"><input type="radio" name="histType" value="AML with t(8;21)(q22;q22); RUNX1-RUNX1T1"><span class="lbltxt">AML with t(8;21)(q22;q22); RUNX1-RUNX1T1</span></label>
            <label class="hist"><input type="radio" name="histType" value="AML with inv(16)(p13.1q22) or t(16;16)(p13.1;q22); CBFB-MYH11"><span class="lbltxt">AML with inv(16) or t(16;16); CBFB-MYH11</span></label>
            <label class="hist"><input type="radio" name="histType" value="Acute promyelocytic leukemia with t(15;17)(q22;q12); PML-RARA"><span class="lbltxt">Acute promyelocytic leukemia with t(15;17); PML-RARA</span></label>
            <label class="hist"><input type="radio" name="histType" value="AML with t(9;11)(p22;q23); MLLT3-MLL"><span class="lbltxt">AML with t(9;11); MLLT3-MLL</span></label>
            <label class="hist"><input type="radio" name="histType" value="AML with t(6;9)(p23;q34); DEK-NUP214"><span class="lbltxt">AML with t(6;9); DEK-NUP214</span></label>
            <label class="hist"><input type="radio" name="histType" value="AML with inv(3)(q21q26.2) or t(3;3)(q21;q26.2); RPN1-EVI1"><span class="lbltxt">AML with inv(3) or t(3;3); RPN1-EVI1</span></label>
            <label class="hist"><input type="radio" name="histType" value="AML (megakaryoblastic) with t(1;22)(p13;q13); RBM15-MKL1"><span class="lbltxt">AML (megakaryoblastic) with t(1;22); RBM15-MKL1</span></label>
            <label class="hist"><input type="radio" name="histType" value="AML with mutated NPM1"><span class="lbltxt">AML with mutated NPM1</span></label>
            <label class="hist"><input type="radio" name="histType" value="AML with mutated CEBPA"><span class="lbltxt">AML with mutated CEBPA</span></label>
          </div>
        </details>

        <details>
          <summary>AML With Myelodysplasia-Related Changes (check all that apply)</summary>
          <div class="row" style="margin-top:10px">
            <div class="col">
              <label><input type="checkbox" name="amlMrc" value="Multilineage dysplasia"><span class="lbltxt">Multilineage dysplasia</span></label>
              <label><input type="checkbox" name="amlMrc" value="Prior myelodysplastic syndrome"><span class="lbltxt">Prior myelodysplastic syndrome</span></label>
              <label><input type="checkbox" name="amlMrc" value="Myelodysplasia-related cytogenetic abnormalities"><span class="lbltxt">Myelodysplasia-related cytogenetic abnormalities</span></label>
            </div>
          </div>
          <div class="hint">These are appended as qualifiers if you select an AML category above.</div>
        </details>

        <details>
          <summary>Therapy-Related Myeloid Neoplasms</summary>
          <div class="hist-list" data-group="trmn">
            <label class="hist"><input type="radio" name="histType" value="Therapy-related AML"><span class="lbltxt">Therapy-related AML</span></label>
            <label class="hist"><input type="radio" name="histType" value="Therapy-related myelodysplastic syndrome"><span class="lbltxt">Therapy-related myelodysplastic syndrome</span></label>
            <label class="hist"><input type="radio" name="histType" value="Therapy-related myelodysplastic/myeloproliferative neoplasm"><span class="lbltxt">Therapy-related myelodysplastic/myeloproliferative neoplasm</span></label>
          </div>
        </details>

        <details>
          <summary>AML, NOS</summary>
          <div class="hist-list" data-group="amlnos">
            <label class="hist"><input type="radio" name="histType" value="AML with minimal differentiation"><span class="lbltxt">AML with minimal differentiation</span></label>
            <label class="hist"><input type="radio" name="histType" value="AML without maturation"><span class="lbltxt">AML without maturation</span></label>
            <label class="hist"><input type="radio" name="histType" value="AML with maturation"><span class="lbltxt">AML with maturation</span></label>
            <label class="hist"><input type="radio" name="histType" value="Acute myelomonocytic leukemia"><span class="lbltxt">Acute myelomonocytic leukemia</span></label>
            <label class="hist"><input type="radio" name="histType" value="Acute monoblastic/monocytic leukemia"><span class="lbltxt">Acute monoblastic/monocytic leukemia</span></label>
            <label class="hist"><input type="radio" name="histType" value="Acute erythroid leukemia"><span class="lbltxt">Acute erythroid leukemia</span></label>
            <label class="hist"><input type="radio" name="histType" value="Acute megakaryocytic leukemia"><span class="lbltxt">Acute megakaryocytic leukemia</span></label>
            <label class="hist"><input type="radio" name="histType" value="Acute basophilic leukemia"><span class="lbltxt">Acute basophilic leukemia</span></label>
            <label class="hist"><input type="radio" name="histType" value="Acute panmyelosis with myelofibrosis"><span class="lbltxt">Acute panmyelosis with myelofibrosis</span></label>
            <label class="hist"><input type="radio" name="histType" value="AML, NOS"><span class="lbltxt">AML, NOS</span></label>
          </div>
        </details>

        <details>
          <summary>Myeloid Proliferations Related to Down Syndrome</summary>
          <div class="hist-list" data-group="ds">
            <label class="hist"><input type="radio" name="histType" value="Transient abnormal myelopoiesis"><span class="lbltxt">Transient abnormal myelopoiesis</span></label>
            <label class="hist"><input type="radio" name="histType" value="Myeloid leukemia associated with Down syndrome"><span class="lbltxt">Myeloid leukemia associated with Down syndrome</span></label>
          </div>
        </details>

        <details>
          <summary>Acute Leukemias of Ambiguous Lineage</summary>
          <div class="hist-list" data-group="amb">
            <label class="hist"><input type="radio" name="histType" value="Acute undifferentiated leukemia"><span class="lbltxt">Acute undifferentiated leukemia</span></label>
            <label class="hist"><input type="radio" name="histType" value="Mixed phenotype acute leukemia with t(9;22)(q34;q11.2); BCR-ABL1"><span class="lbltxt">MPAL with t(9;22); BCR-ABL1</span></label>
            <label class="hist"><input type="radio" name="histType" value="Mixed phenotype acute leukemia with t(v;11q23); MLL rearranged"><span class="lbltxt">MPAL with t(v;11q23); MLL rearranged</span></label>
            <label class="hist"><input type="radio" name="histType" value="Mixed phenotype acute leukemia, B/myeloid, NOS"><span class="lbltxt">MPAL, B/myeloid, NOS</span></label>
            <label class="hist"><input type="radio" name="histType" value="Mixed phenotype acute leukemia, T/myeloid, NOS"><span class="lbltxt">MPAL, T/myeloid, NOS</span></label>
            <label class="hist"><input type="radio" name="histType" value="Mixed phenotype acute leukemia, NOS"><span class="lbltxt">MPAL, NOS (rare types: specify below)</span></label>
            <div class="col">
              <input type="text" id="mpalRare" placeholder="Rare type (optional)..." />
              <div class="mini">Only used if “MPAL, NOS (rare types)” is selected.</div>
            </div>
            <label class="hist"><input type="radio" name="histType" value="Natural killer (NK) cell lymphoblastic leukemia/lymphoma"><span class="lbltxt">NK cell lymphoblastic leukemia/lymphoma</span></label>
          </div>
        </details>

        <details>
          <summary>Other Myeloid Leukemias</summary>
          <div class="hist-list" data-group="othermyeloid">
            <label class="hist"><input type="radio" name="histType" value="Blastic plasmacytoid dendritic cell neoplasm"><span class="lbltxt">Blastic plasmacytoid dendritic cell neoplasm</span></label>
          </div>
        </details>

        <details>
          <summary>Precursor Lymphoid Neoplasms</summary>
          <div class="hist-list" data-group="precursor">
            <label class="hist"><input type="radio" name="histType" value="B lymphoblastic leukemia/lymphoma, NOS"><span class="lbltxt">B lymphoblastic leukemia/lymphoma, NOS</span></label>
            <label class="hist"><input type="radio" name="histType" value="B lymphoblastic leukemia/lymphoma with t(9;22)(q34;q11.2); BCR-ABL1"><span class="lbltxt">B-ALL with t(9;22); BCR-ABL1</span></label>
            <label class="hist"><input type="radio" name="histType" value="B lymphoblastic leukemia/lymphoma with t(v;11q23); MLL rearranged"><span class="lbltxt">B-ALL with t(v;11q23); MLL rearranged</span></label>
            <label class="hist"><input type="radio" name="histType" value="B lymphoblastic leukemia/lymphoma with t(12;21)(p13;q22); TEL-AML1 (ETV6-RUNX1)"><span class="lbltxt">B-ALL with t(12;21); ETV6-RUNX1</span></label>
            <label class="hist"><input type="radio" name="histType" value="B lymphoblastic leukemia/lymphoma with hyperdiploidy"><span class="lbltxt">B-ALL with hyperdiploidy</span></label>
            <label class="hist"><input type="radio" name="histType" value="B lymphoblastic leukemia/lymphoma with hypodiploidy"><span class="lbltxt">B-ALL with hypodiploidy</span></label>
            <label class="hist"><input type="radio" name="histType" value="B lymphoblastic leukemia/lymphoma with t(5;14)(q31;q32); IL3-IGH"><span class="lbltxt">B-ALL with t(5;14); IL3-IGH</span></label>
            <label class="hist"><input type="radio" name="histType" value="B lymphoblastic leukemia/lymphoma with t(1;19)(q23;p13.3); E2A-PBX1 (TCF3-PBX1)"><span class="lbltxt">B-ALL with t(1;19); TCF3-PBX1</span></label>
            <label class="hist"><input type="radio" name="histType" value="T lymphoblastic leukemia/lymphoma"><span class="lbltxt">T lymphoblastic leukemia/lymphoma</span></label>
          </div>
        </details>

        <details>
          <summary>Mature B-Cell Neoplasms</summary>
          <div class="hist-list" data-group="matureb">
            <label class="hist"><input type="radio" name="histType" value="Chronic lymphocytic leukemia/small lymphocytic lymphoma"><span class="lbltxt">CLL/SLL</span></label>
            <label class="hist"><input type="radio" name="histType" value="B-cell prolymphocytic leukemia"><span class="lbltxt">B-cell prolymphocytic leukemia</span></label>
            <label class="hist"><input type="radio" name="histType" value="Splenic B-cell marginal zone lymphoma"><span class="lbltxt">Splenic marginal zone lymphoma</span></label>
            <label class="hist"><input type="radio" name="histType" value="Hairy cell leukemia"><span class="lbltxt">Hairy cell leukemia</span></label>
            <label class="hist"><input type="radio" name="histType" value="Splenic B-cell lymphoma/leukemia, unclassifiable"><span class="lbltxt">Splenic B-cell lymphoma/leukemia, unclassifiable</span></label>
            <label class="hist"><input type="radio" name="histType" value="Splenic diffuse red pulp small B-cell lymphoma"><span class="lbltxt">Splenic diffuse red pulp small B-cell lymphoma</span></label>
            <label class="hist"><input type="radio" name="histType" value="Hairy cell leukemia-variant"><span class="lbltxt">Hairy cell leukemia-variant</span></label>
            <label class="hist"><input type="radio" name="histType" value="Lymphoplasmacytic lymphoma"><span class="lbltxt">Lymphoplasmacytic lymphoma</span></label>
            <label class="hist"><input type="radio" name="histType" value="Plasma cell myeloma"><span class="lbltxt">Plasma cell myeloma</span></label>
            <label class="hist"><input type="radio" name="histType" value="Extranodal marginal zone lymphoma of mucosa-associated lymphoid tissue (MALT lymphoma)"><span class="lbltxt">MALT lymphoma</span></label>
            <label class="hist"><input type="radio" name="histType" value="Follicular lymphoma"><span class="lbltxt">Follicular lymphoma</span></label>
            <label class="hist"><input type="radio" name="histType" value="Mantle cell lymphoma"><span class="lbltxt">Mantle cell lymphoma</span></label>
            <label class="hist"><input type="radio" name="histType" value="Diffuse large B-cell lymphoma (DLBCL), NOS"><span class="lbltxt">DLBCL, NOS</span></label>
            <label class="hist"><input type="radio" name="histType" value="T cell/histiocyte-rich large B-cell lymphoma"><span class="lbltxt">T cell/histiocyte-rich LBCL</span></label>
            <label class="hist"><input type="radio" name="histType" value="Primary cutaneous DLBCL, leg type"><span class="lbltxt">Primary cutaneous DLBCL, leg type</span></label>
            <label class="hist"><input type="radio" name="histType" value="Epstein-Barr virus (EBV)-positive DLBCL of the elderly"><span class="lbltxt">EBV+ DLBCL of the elderly</span></label>
            <label class="hist"><input type="radio" name="histType" value="DLBCL associated with chronic inflammation"><span class="lbltxt">DLBCL associated with chronic inflammation</span></label>
            <label class="hist"><input type="radio" name="histType" value="Lymphomatoid granulomatosis"><span class="lbltxt">Lymphomatoid granulomatosis</span></label>
            <label class="hist"><input type="radio" name="histType" value="Anaplastic lymphoma kinase (ALK)-positive large B-cell lymphoma"><span class="lbltxt">ALK+ large B-cell lymphoma</span></label>
            <label class="hist"><input type="radio" name="histType" value="Plasmablastic lymphoma"><span class="lbltxt">Plasmablastic lymphoma</span></label>
            <label class="hist"><input type="radio" name="histType" value="Large B-cell lymphoma arising in HHV8-associated multicentric Castleman disease"><span class="lbltxt">LBCL arising in HHV8+ MCD</span></label>
            <label class="hist"><input type="radio" name="histType" value="Burkitt lymphoma"><span class="lbltxt">Burkitt lymphoma</span></label>
            <label class="hist"><input type="radio" name="histType" value="B-cell lymphoma, unclassifiable, with features intermediate between diffuse large B-cell lymphoma and Burkitt lymphoma"><span class="lbltxt">BCL-U, intermediate DLBCL/Burkitt</span></label>
            <label class="hist"><input type="radio" name="histType" value="B-cell lymphoma, unclassifiable, with features intermediate between diffuse large B-cell lymphoma and classical Hodgkin lymphoma"><span class="lbltxt">BCL-U, intermediate DLBCL/cHL</span></label>
            <label class="hist"><input type="radio" name="histType" value="B-cell lymphoma, NOS"><span class="lbltxt">B-cell lymphoma, NOS</span></label>

            <label class="hist">
              <input type="radio" name="histType" value="Other (Mature B-cell)">
              <span class="lbltxt">Other (specify):</span>
            </label>
            <div class="col">
              <input type="text" id="otherMatureB" placeholder="Specify other mature B-cell neoplasm..." />
              <div class="mini">Only used if “Other (Mature B-cell)” is selected.</div>
            </div>
          </div>
        </details>

        <details>
          <summary>Mature T- and NK-cell Neoplasms</summary>
          <div class="hist-list" data-group="maturetnk">
            <label class="hist"><input type="radio" name="histType" value="T-cell lymphoma, subtype cannot be determined"><span class="lbltxt">T-cell lymphoma, subtype cannot be determined</span></label>
            <label class="hist"><input type="radio" name="histType" value="T-cell prolymphocytic leukemia"><span class="lbltxt">T-cell prolymphocytic leukemia</span></label>
            <label class="hist"><input type="radio" name="histType" value="T-cell large granular lymphocytic leukemia"><span class="lbltxt">T-LGL leukemia</span></label>
            <label class="hist"><input type="radio" name="histType" value="Chronic lymphoproliferative disorder of NK cells"><span class="lbltxt">Chronic NK-cell LPD</span></label>
            <label class="hist"><input type="radio" name="histType" value="Aggressive NK-cell leukemia"><span class="lbltxt">Aggressive NK-cell leukemia</span></label>
            <label class="hist"><input type="radio" name="histType" value="Adult T-cell leukemia/lymphoma"><span class="lbltxt">Adult T-cell leukemia/lymphoma</span></label>
            <label class="hist"><input type="radio" name="histType" value="Extranodal NK/T-cell lymphoma, nasal type"><span class="lbltxt">Extranodal NK/T-cell lymphoma, nasal type</span></label>
            <label class="hist"><input type="radio" name="histType" value="Enteropathy-associated T-cell lymphoma"><span class="lbltxt">Enteropathy-associated T-cell lymphoma</span></label>
            <label class="hist"><input type="radio" name="histType" value="Hepatosplenic T-cell lymphoma"><span class="lbltxt">Hepatosplenic T-cell lymphoma</span></label>
            <label class="hist"><input type="radio" name="histType" value="Mycosis fungoides"><span class="lbltxt">Mycosis fungoides</span></label>
            <label class="hist"><input type="radio" name="histType" value="Peripheral T-cell lymphoma, NOS"><span class="lbltxt">PTCL, NOS</span></label>
            <label class="hist"><input type="radio" name="histType" value="Angioimmunoblastic T-cell lymphoma"><span class="lbltxt">Angioimmunoblastic T-cell lymphoma</span></label>
            <label class="hist"><input type="radio" name="histType" value="Anaplastic large cell lymphoma, ALK-positive"><span class="lbltxt">ALCL, ALK-positive</span></label>
            <label class="hist"><input type="radio" name="histType" value="Anaplastic large cell lymphoma, ALK-negative"><span class="lbltxt">ALCL, ALK-negative</span></label>
          </div>
        </details>

        <details>
          <summary>Hodgkin Lymphoma</summary>
          <div class="hist-list" data-group="hl">
            <label class="hist"><input type="radio" name="histType" value="Nodular lymphocyte predominant Hodgkin lymphoma"><span class="lbltxt">Nodular lymphocyte predominant Hodgkin lymphoma</span></label>
            <label class="hist"><input type="radio" name="histType" value="Classical Hodgkin lymphoma"><span class="lbltxt">Classical Hodgkin lymphoma</span></label>
          </div>
        </details>

        <details>
          <summary>Histiocytic and Dendritic Cell Neoplasms</summary>
          <div class="hist-list" data-group="histio">
            <label class="hist"><input type="radio" name="histType" value="Histiocytic sarcoma"><span class="lbltxt">Histiocytic sarcoma</span></label>
            <label class="hist"><input type="radio" name="histType" value="Langerhans cell histiocytosis"><span class="lbltxt">Langerhans cell histiocytosis</span></label>
            <label class="hist"><input type="radio" name="histType" value="Langerhans cell sarcoma"><span class="lbltxt">Langerhans cell sarcoma</span></label>
            <label class="hist"><input type="radio" name="histType" value="Interdigitating dendritic cell sarcoma"><span class="lbltxt">Interdigitating dendritic cell sarcoma</span></label>
            <label class="hist"><input type="radio" name="histType" value="Follicular dendritic cell sarcoma"><span class="lbltxt">Follicular dendritic cell sarcoma</span></label>
            <label class="hist"><input type="radio" name="histType" value="Disseminated juvenile xanthogranuloma"><span class="lbltxt">Disseminated juvenile xanthogranuloma</span></label>
            <label class="hist"><input type="radio" name="histType" value="Histiocytic neoplasm, NOS"><span class="lbltxt">Histiocytic neoplasm, NOS</span></label>
          </div>
        </details>

        <details>
          <summary>Posttransplant Lymphoproliferative Disorders (PTLD)</summary>
          <div class="hist-list" data-group="ptld">
            <label class="hist"><input type="radio" name="histType" value="PTLD — Plasmacytic hyperplasia"><span class="lbltxt">Early lesions: Plasmacytic hyperplasia</span></label>
            <label class="hist"><input type="radio" name="histType" value="PTLD — Infectious mononucleosis-like PTLD"><span class="lbltxt">Early lesions: Infectious mononucleosis-like PTLD</span></label>
            <label class="hist"><input type="radio" name="histType" value="PTLD — Polymorphic PTLD"><span class="lbltxt">Polymorphic PTLD</span></label>

            <label class="hist"><input type="radio" name="histType" value="PTLD — Monomorphic PTLD"><span class="lbltxt">Monomorphic PTLD (specify subtype):</span></label>
            <div class="col">
              <input type="text" id="ptldMonoSubtype" placeholder="Specify monomorphic PTLD subtype..." />
              <div class="mini">Only used if “Monomorphic PTLD” is selected.</div>
            </div>

            <label class="hist"><input type="radio" name="histType" value="PTLD — Classical Hodgkin lymphoma type PTLD"><span class="lbltxt">Classical Hodgkin lymphoma type PTLD</span></label>

            <label class="hist">
              <input type="radio" name="histType" value="Other (PTLD)">
              <span class="lbltxt">Other (specify):</span>
            </label>
            <div class="col">
              <input type="text" id="ptldOther" placeholder="Specify other PTLD..." />
              <div class="mini">Only used if “Other (PTLD)” is selected.</div>
            </div>
          </div>
        </details>
      </div>

      <div class="card">
        <h2>Ancillary studies <span class="pill">optional</span></h2>

        <div class="row">
          <div class="col">
            <div class="smallcap">Immunophenotyping (flow and/or IHC)</div>
            <label style="margin-top:8px"><input type="checkbox" id="immunoDone"><span class="lbltxt">Performed, see separate report</span></label>
            <input type="text" id="immunoRef" placeholder="Report ID / Accession (optional)" />
          </div>
          <div class="col">
            <div class="smallcap">Cytogenetic studies</div>
            <label style="margin-top:8px"><input type="checkbox" id="cytoDone"><span class="lbltxt">Performed, see separate report</span></label>
            <input type="text" id="cytoRef" placeholder="Report ID / Accession (optional)" />
          </div>
        </div>

        <div class="row" style="margin-top:10px">
          <div class="col">
            <div class="smallcap">FISH</div>
            <label style="margin-top:8px"><input type="checkbox" id="fishDone"><span class="lbltxt">Performed, see separate report</span></label>
            <input type="text" id="fishRef" placeholder="Report ID / Accession (optional)" />
          </div>
          <div class="col">
            <div class="smallcap">Molecular genetic studies</div>
            <label style="margin-top:8px"><input type="checkbox" id="molDone"><span class="lbltxt">Performed, see separate report</span></label>
            <input type="text" id="molRef" placeholder="Report ID / Accession (optional)" />
          </div>
        </div>
      </div>

    </div>

    <div class="rightcol">
      <div class="card">
        <h2>Generated synoptic report <span class="pill">copy/paste</span></h2>
        <div class="btnbar">
          <button id="btnGen">Generate</button>
          <button id="btnCopy" class="secondary">Copy</button>
          <button id="btnClear" class="danger">Clear all</button>
        </div>
        <p class="hint">Output format is simple and consistent. Edit locally if you want your institution’s exact headings.</p>
        <textarea id="output" placeholder="Click Generate..."></textarea>
        <p id="status" class="mini" style="margin:10px 0 0;"></p>
      </div>
    </div>
  </div>

  <script>
    const $ = (sel, root=document) => root.querySelector(sel);
    const $$ = (sel, root=document) => Array.from(root.querySelectorAll(sel));

    function checkedValues(name){
      return $$(`input[name="${name}"]:checked`).map(x => x.value);
    }

    function selectedRadio(name){
      const el = $(`input[name="${name}"]:checked`);
      return el ? el.value : "";
    }

    function formatPerformed(label, doneEl, refEl){
      if (!doneEl.checked) return "";
      const ref = (refEl.value || "").trim();
      return ref ? `${label}: Performed (see separate report: ${ref}).` : `${label}: Performed (see separate report).`;
    }

    function buildHistologicType(){
      const base = selectedRadio("histType");
      if (!base) return "";

      // Add “specify” fields for certain selections
      if (base === "Mastocytosis"){
        const t = ($("#mastType").value || "").trim();
        return t ? `Mastocytosis (${t})` : "Mastocytosis";
      }
      if (base === "Mixed phenotype acute leukemia, NOS"){
        const t = ($("#mpalRare").value || "").trim();
        return t ? `Mixed phenotype acute leukemia, NOS (rare type: ${t})` : "Mixed phenotype acute leukemia, NOS";
      }
      if (base === "Other (Mature B-cell)"){
        const t = ($("#otherMatureB").value || "").trim();
        return t ? t : "Other (Mature B-cell neoplasm)";
      }
      if (base === "PTLD — Monomorphic PTLD"){
        const t = ($("#ptldMonoSubtype").value || "").trim();
        return t ? `PTLD — Monomorphic PTLD (${t})` : "PTLD — Monomorphic PTLD";
      }
      if (base === "Other (PTLD)"){
        const t = ($("#ptldOther").value || "").trim();
        return t ? `PTLD — Other (${t})` : "PTLD — Other";
      }

      return base;
    }

    function buildOutput(){
      const specimen = checkedValues("specimen");
      const procedure = checkedValues("procedure");
      const aspSite = checkedValues("aspSite");
      const bxSite  = checkedValues("bxSite");

      const hist = buildHistologicType();
      const amlMrc = checkedValues("amlMrc");

      const lines = [];
      lines.push("Cancer Synoptic Case Summary");
      lines.push("");

      // Specimen
      if (specimen.length){
        lines.push("Specimen:");
        specimen.forEach(s => lines.push(`- ${s}`));
        lines.push("");
      }

      // Procedure + sites
      if (procedure.length){
        lines.push("Procedure:");
        procedure.forEach(p => lines.push(`- ${p}`));
        lines.push("");
      }
      if (aspSite.length){
        lines.push("Aspiration site:");
        aspSite.forEach(s => lines.push(`- ${s}`));
        lines.push("");
      }
      if (bxSite.length){
        lines.push("Biopsy site:");
        bxSite.forEach(s => lines.push(`- ${s}`));
        lines.push("");
      }

      // Histologic type
      if (hist){
        let histLine = hist;
        if (amlMrc.length){
          histLine += ` (myelodysplasia-related changes: ${amlMrc.join("; ")})`;
        }
        lines.push("Histologic type:");
        lines.push(`- ${histLine}`);
        lines.push("");
      } else {
        lines.push("Histologic type:");
        lines.push("- [Not selected]");
        lines.push("");
      }

      // Ancillary studies
      const anc = [];
      const immuno = formatPerformed("Immunophenotyping", $("#immunoDone"), $("#immunoRef"));
      const cyto   = formatPerformed("Cytogenetic studies", $("#cytoDone"), $("#cytoRef"));
      const fish   = formatPerformed("Fluorescence in situ hybridization (FISH)", $("#fishDone"), $("#fishRef"));
      const mol    = formatPerformed("Molecular genetic studies", $("#molDone"), $("#molRef"));
      [immuno, cyto, fish, mol].forEach(x => { if (x) anc.push(x); });

      if (anc.length){
        lines.push("Ancillary studies:");
        anc.forEach(a => lines.push(`- ${a}`));
        lines.push("");
      }

      // Minimal “completion” hints
      const missing = [];
      if (!specimen.length) missing.push("Specimen");
      if (!procedure.length) missing.push("Procedure");
      if (!hist) missing.push("Histologic type");

      return { text: lines.join("\n"), missing };
    }

    function clearAll(){
      $$('input[type="checkbox"]').forEach(i => i.checked = false);
      $$('input[type="radio"]').forEach(i => i.checked = false);
      $$('input[type="text"]').forEach(i => i.value = "");
      $("#output").value = "";
      $("#status").textContent = "";
    }

    // Filter histologic options
    $("#histFilter").addEventListener("input", (e) => {
      const q = (e.target.value || "").trim().toLowerCase();
      $$(".hist").forEach(lbl => {
        const t = lbl.innerText.toLowerCase();
        const show = !q || t.includes(q);
        lbl.style.display = show ? "" : "none";
      });
      // Also hide/show associated specify text boxes by proximity (simple approach)
      ["#mastType", "#mpalRare", "#otherMatureB", "#ptldMonoSubtype", "#ptldOther"].forEach(id => {
        const box = $(id);
        if (!box) return;
        // Keep them visible if their placeholder matches filter or if filter empty
        const pt = (box.placeholder || "").toLowerCase();
        box.style.display = (!q || pt.includes(q)) ? "" : "none";
        box.nextElementSibling && (box.nextElementSibling.style.display = box.style.display);
      });
    });

    $("#btnGen").addEventListener("click", () => {
      const { text, missing } = buildOutput();
      $("#output").value = text;

      if (missing.length){
        $("#status").innerHTML = `⚠️ Missing: <b>${missing.join(", ")}</b> (optional, but usually expected).`;
      } else {
        $("#status").innerHTML = `✅ Generated.`;
      }
    });

    $("#btnCopy").addEventListener("click", async () => {
      const t = $("#output").value || "";
      if (!t.trim()){
        $("#status").textContent = "Nothing to copy (generate first).";
        return;
      }
      try{
        await navigator.clipboard.writeText(t);
        $("#status").textContent = "Copied to clipboard.";
      } catch (err){
        // Fallback
        $("#output").focus();
        $("#output").select();
        document.execCommand("copy");
        $("#status").textContent = "Copied (fallback).";
      }
    });

    $("#btnClear").addEventListener("click", clearAll);
  </script>
</body>
</html>
